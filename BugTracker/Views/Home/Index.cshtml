﻿@model BugTracker.Models.DashboardViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="content">

    <div class="row">
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark"><i class="fa-fw fa fa-home"></i> Dashboard </h1>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
            <ul id="sparks" class="">
                @if (User.Identity.IsAuthenticated)
                {
                    <li class="sparks-info">
                        <h5 style="color:#ee0707"> Projects <span class="txt-color-red"> <a href=@Url.Action("Index","Projects")> <i class="fa fa-folder-open" style="color:#ee0707"></i></a> @Model.Projects.Count </span></h5>
                    </li>

                    <li class="sparks-info">
                        <h5 style="color:#23c317"> Tickets <span class="txt-color-greenLight"> <a href=@Url.Action("Index","Tickets")> <i class="fa fa-ticket" style="color:#23c317"></i></a> &nbsp; @Model.Tickets.Count </span></h5>
                    </li>

                    if (User.IsInRole("Admin") | User.IsInRole("Administrator") | User.IsInRole("ProjectManager"))
                    {
                        <li class="sparks-info">
                            <h5 style="color:#2a46a0"> Users on projects <span class="txt-color-blue"> <a href=@Url.Action("ManageProjectUsers", "Admin")> <i class="fa fa-user" style="color:#2a46a0"></i></a> &nbsp; @Model.Users.Count </span></h5>
                        </li>
                    }
                }

            </ul>
        </div>
    </div>
    <!-- widget grid -->
    <section id="widget-grid" class="">

        <!-- row -->
        <div class="row">
            <article class="col-sm-12">
                <!-- new widget -->
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-darken jarviswidget-sortable" id="wid-id-1" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-editbutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"

                    -->
                    <header role="heading" class="ui-sortable-handle">
                        <span class="widget-icon"> <i class="fa fa-table"></i> </span>
                        <h2> BugZapper Current Projects </h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">

                            <table id="datatable_fixed_column" class="table table-striped table-bordered" width="100%">

                                <thead>
                                    <tr>
                                        <th class="hasinput" style="width:17%">
                                            <input type="text" class="form-control" placeholder=" Project Name " />
                                        </th>

                                        <th class="hasinput" style="width:18%">
                                            <div class="input-group">
                                                <input class="form-control" placeholder=" Project Description " type="text">
                                                <span class="input-group-addon">
                                                </span>
                                            </div>
                                        </th>

                                        <th class="hasinput" style="width:16%">
                                            <input type="text" class="form-control" placeholder=" Project Manager " />
                                        </th>

                                        <th class="hasinput" style="width:17%">
                                            <input type="text" class="form-control" placeholder=" Created Date " />
                                        </th>

                                        <th class="hasinput icon-addon">
                                            <input id="dateselect_filter" type="text" placeholder=" Users " class="form-control datepicker" data-dateformat="yy/mm/dd">
                                            <label for="dateselect_filter" class="glyphicon glyphicon-calendar no-margin padding-top-15" rel="tooltip" title="" data-original-title="Filter Date"></label>
                                        </th>

                                        <th class="hasinput" style="width:16%">
                                            <input type="text" class="form-control" placeholder=" Tickets " />
                                        </th>

                                    </tr>
                                    <tr>
                                        <th data-class="expand">Name</th>
                                        <th>Description</th>
                                        <th data-hide="phone"> Project Manager</th>
                                        <th data-hide="phone"> Created Date </th>
                                        <th data-hide="phone,tablet">  Users on Project </th>
                                        <th data-hide="phone,tablet"> Tickets </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    @foreach (var proj in Model.Projects)
                                    {
                                        <tr>
                                            <td>@proj.Project.Name</td>
                                            <td>@proj.Project.Description</td>
                                            <td>@proj.ProjectManager.DisplayName</td>
                                            <td>@proj.Project.Created.Date.ToString("MM.dd.yyyy")</td>
                                            <td>@proj.Project.Users.Count()</td>
                                            <td>@proj.Project.Tickets.Count</td>

                                        </tr>
                                    }


                                </tbody>

                            </table>

                        </div>
                        <!-- end widget content -->

                    </div>
                    <!-- end widget div -->

                </div>
                <!-- end widget -->
                <!-- end widget div -->
                <!-- end widget -->

            </article>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-2" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"

                    -->
                    <header>
                        <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
                        <h2>Bar Graph </h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">

                            <div id="bar-graph" class="chart no-padding"></div>

                        </div>
                        <!-- end widget content -->

                    </div>
                    <!-- end widget div -->

                </div>
            </div>

            <div class="col-md-4">
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-3" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"

                    -->
                    <header>
                        <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
                        <h2>Bar Graph </h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">

                            <div id="bar-graph" class="chart no-padding"></div>

                        </div>
                        <!-- end widget content -->

                    </div>
                    <!-- end widget div -->

                </div>
            </div>

            <div class="col-md-4">
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-4" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"

                    -->
                    <header>
                        <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
                        <h2>Bar Graph </h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">

                            <div id="bar-graph" class="chart no-padding"></div>

                        </div>
                        <!-- end widget content -->

                    </div>
                    <!-- end widget div -->

                </div>
            </div>
        </div>

    </section>

</div>

@section scripts{
    <script src="~/Scripts/morris.min.js"></script>
    <script src="~/Scripts/raphael.min.js"></script>
    @*<script>

        $(function () {
            if ($("#wid-id-4")) {
                Morris.Donut({
                    element: 'donut-graph',
                    data: [{
                        value: 70,
                        label: 'foo'
                    }, {
                        value: 15,
                        label: 'bar'
                    }, {
                        value: 10,
                        label: 'baz'
                    }, {
                        value: 5,
                        label: 'A really really long label'
                    }],
                    formatter: function (x) {
                        return x + "%"
                    }
                });
            }
        })

    </script>*@
}